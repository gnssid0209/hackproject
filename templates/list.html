<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>등록된 분실물</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        h1 { text-align: center; }
        .item-card { margin-bottom: 15px; padding: 12px; border: 1px solid #ccc; border-radius: 8px; background: white; cursor: pointer; transition: box-shadow 0.2s; }
        .item-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .item-detail { display: none; margin-top: 10px; padding: 10px; border-top: 1px dashed #ccc; }
        .thumb { max-width: 200px; border-radius: 8px; margin-top: 6px; }
        .btn { display: inline-block; margin-top: 10px; padding: 8px 12px; border-radius: 6px; background:#1f6feb; color:white; border:none; cursor:pointer; font-weight:600; text-decoration:none; }
    </style>
</head>
<body>
    <h1>등록된 분실물</h1>

    {% if username %}
        <p style="text-align:right; font-weight:bold;">{{ username }} 님의 포인트: {{ point }}점</p>
    {% else %}
        <p style="text-align:right;">로그인 후 포인트를 확인할 수 있습니다.</p>
    {% endif %}

    <button onclick="filterMyItems()">내 분실물만 보기</button>
    
    {% if items and items|length > 0 %}
        {% for item in items %}
            <div class="item-card">
                <p><strong>물건 이름:</strong> {{ item.item }}</p>
                <p><strong>보상 포인트:</strong> {{ item.point }}</p>
                {% if item.photo %}
                    <p><strong>사진:</strong></p>
                    <img class="thumb" src="/static/uploads/{{ item.photo }}" alt="photo">
                {% else %}
                    <p><strong>사진:</strong> 없음</p>
                {% endif %}
                <a class="btn" href="/find">신고하기</a>

                <div class="item-detail">
                    <p><strong>상세 설명:</strong> {{ item.characteristic }}</p>
                    <p><strong>출발 지점:</strong> {{ item.start_address }} ({{ item.start_lat }}, {{ item.start_lng }})</p>
                    <p><strong>도착 지점:</strong> {{ item.end_address }} ({{ item.lat }}, {{ item.lng }})</p>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p style="text-align:center; font-size:18px; color:#777;">현재 등록된 분실물은 없습니다.</p>
    {% endif %}

    <script>
        document.querySelectorAll('.item-card').forEach(card => {
            card.addEventListener('click', () => {
                const detail = card.querySelector('.item-detail');
                if (detail.style.display === 'block') {
                    detail.style.display = 'none';
                } else {
                    document.querySelectorAll('.item-detail').forEach(d => d.style.display = 'none');
                    detail.style.display = 'block';
                }
            });
        });
    </script>
</body>
</html>
